{"ast":null,"code":"import _slicedToArray from \"/usr/src/app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/usr/src/app/src/UserNotebook.js\";\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport axios from 'axios';\nimport Transaction from './Transaction';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '80%'\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular\n  }\n}));\nexport default function UserNotebook() {\n  const classes = useStyles();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        transactionsHistory = _useState2[0],\n        setTransactionsHistory = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        amountAvailable = _useState4[0],\n        setAmountAvailable = _useState4[1];\n\n  useEffect(() => {\n    const fetchHistory = async () => {\n      const historyFetched = await axios.get('http://localhost:3005/accountHistory', {\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).catch(e => {\n        console.log('error fetching', e);\n      });\n\n      if (historyFetched.data) {\n        setTransactionsHistory(historyFetched.data);\n      }\n    };\n\n    const fetchUserInfo = async () => {\n      const userInfo = await axios.get('http://localhost:3005/userInfo', {\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).catch(e => {\n        console.log('error fetching', e);\n      });\n\n      if (userInfo.data) {\n        setAmountAvailable(userInfo.data.credit);\n      }\n    };\n\n    fetchHistory();\n    fetchUserInfo();\n  }, []);\n\n  const clearHistory = async () => {\n    await axios.get('http://localhost:3005/clearHistory', {\n      headers: {\n        'Access-Control-Allow-Origin': '*'\n      }\n    }).catch(e => {\n      console.log('error fetching', e);\n    });\n    setTransactionsHistory([]);\n  };\n\n  if (transactionsHistory.length === 0) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"No transactions here...\");\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Transactions history\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"Amount available: $\", amountAvailable), React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, transactionsHistory.map(each => {\n    return React.createElement(Transaction, {\n      transaction: each,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    });\n  })), React.createElement(\"button\", {\n    onClick: e => clearHistory(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Reset account\"));\n}","map":{"version":3,"sources":["/usr/src/app/src/UserNotebook.js"],"names":["React","useEffect","useState","makeStyles","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","Typography","ExpandMoreIcon","axios","Transaction","useStyles","theme","root","width","heading","fontSize","typography","pxToRem","fontWeight","fontWeightRegular","UserNotebook","classes","transactionsHistory","setTransactionsHistory","amountAvailable","setAmountAvailable","fetchHistory","historyFetched","get","headers","catch","e","console","log","data","fetchUserInfo","userInfo","credit","clearHistory","length","map","each"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport axios from 'axios';\nimport Transaction from './Transaction'\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '80%'\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular\n  }\n}));\n\nexport default function UserNotebook() {\n  const classes = useStyles();\n  const [transactionsHistory, setTransactionsHistory] = useState([]);\n  const [amountAvailable, setAmountAvailable] = useState(0)\n  useEffect(() => {\n    const fetchHistory = async () => {\n      const historyFetched = await axios\n        .get('http://localhost:3005/accountHistory', {\n          headers: {\n            'Access-Control-Allow-Origin': '*'\n          }\n        })\n        .catch(e => {\n          console.log('error fetching', e);\n        });\n      if (historyFetched.data) {\n          setTransactionsHistory(historyFetched.data);\n      }\n    };\n    const fetchUserInfo = async() => {\n        const userInfo = await axios\n        .get('http://localhost:3005/userInfo', {\n          headers: {\n            'Access-Control-Allow-Origin': '*'\n          }\n        })\n        .catch(e => {\n          console.log('error fetching', e);\n        });\n      if (userInfo.data) {\n          setAmountAvailable(userInfo.data.credit);\n      }\n    }\n    fetchHistory();\n    fetchUserInfo();\n  }, []);\n  const clearHistory = async () => {\n    await axios\n  .get('http://localhost:3005/clearHistory', {\n    headers: {\n      'Access-Control-Allow-Origin': '*'\n    }\n  })\n  .catch(e => {\n    console.log('error fetching', e);\n  });\n  setTransactionsHistory([])\n  } \n  if (transactionsHistory.length === 0) {\n    return <div>No transactions here...</div>;\n  }\n  return (\n      <>\n    <p>Transactions history</p>\n    <p>Amount available: ${amountAvailable}</p>\n    <div className={classes.root}>\n      {transactionsHistory.map(each => {\n        return <Transaction transaction = {each} />;\n      })}\n    </div>\n    <button onClick={e => clearHistory()}>Reset account</button>\n    </>\n  );\n\n}\n\n"]},"metadata":{},"sourceType":"module"}